<!DOCTYPE html>
<html>
<head>
	<title>Los Cubos</title>
	<script type="text/javascript" src="../three.js"></script>
	<script type="text/javascript" src="../jquery-1.9.0.js"></script>
	<script type="text/javascript" src="../dat.gui.js"></script>

</head>
<body>
	<audio src="" autoplay> </audio>
		<style>
 body{
 /* Poner el margen del documento html a 0 y ocultar el desbordamiento para mostrar la escena a ventana completa */
 margin: 0;
 overflow: hidden;
 }
 #SalidaWebGL{

 background-repeat : no-repeat;
 position: fixed;
 background-size : 100% 100%;
 }

</style>

	<!-- div en el que mostraremos la salida -->
	<div id="SalidaWebGL">
	</div>
	<!-- funcion Javascript que ejecutará nuestro ejemplo sobre Three.js -->
	<script type="text/javascript">
		// Cuando se cargue la página se ejecutará nuestra función
		$(function () {

			//Crear una escena, que contendrá todos los elementos como objetos, cámaras y luces.
			var escena = new THREE.Scene();

			//Crear una cámara, que define hacia dónde estamos mirando.
			var camara = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.5, 1000);

			//Crear un objeto render y establecer su tamaño
				var renderizador = new THREE.WebGLRenderer({alpha:true});
			//renderizador.setClearColor(new THREE.Color(0xEEEEEE));
			renderizador.setSize(window.innerWidth, window.innerHeight);
			renderizador.setSize(window.innerWidth, window.innerHeight);
			renderizador.shadowMapEnabled= true;
	
			var ejes = new THREE.AxisHelper( 20 );
			//escena.add(ejes);

			//Crear un cubo
			var materiales= [new THREE.MeshLambertMaterial({color: 0xFF3838 }),
							new THREE.MeshLambertMaterial({color: 0xffffff}),
							new THREE.MeshLambertMaterial({color: 0xFF3838 }),
							new THREE.MeshLambertMaterial({color: 0xffffff}),
							new THREE.MeshLambertMaterial({color: 0xFF3838 }),
							new THREE.MeshLambertMaterial({color: 0xffffff})
							];			

				var geometriaDelCubo = new THREE.CubeGeometry(4,4,4);
				var materialdelcubo = new THREE.MeshFaceMaterial(materiales);
				
				var cubo1 = new THREE.Mesh( geometriaDelCubo, materialdelcubo);
				var cubo2 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo3 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo4 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo5 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo6 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo7 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo8 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo9 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo10 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo11 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo12 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo13 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo14 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo15 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo16 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo17 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo18 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo19 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
				var cubo20 = new THREE.Mesh(geometriaDelCubo, materialdelcubo);
			
				

				//Posicionar el cubo
				cubo1.position.x=3;
				cubo1.position.y=0;
				cubo1.position.z=3;

				cubo2.position.x=9;
				cubo2.position.y=0;
				cubo2.position.z=3;

				cubo3.position.x=3;
				cubo3.position.y=4;
				cubo3.position.z=3;

				cubo4.position.x=9;
				cubo4.position.y=4;
				cubo4.position.z=3;

				cubo5.position.x=3;
				cubo5.position.y=8;
				cubo5.position.z=3;

				cubo6.position.x=9;
				cubo6.position.y=8;
				cubo6.position.z=3;

				cubo7.position.x=3;
				cubo7.position.y=12;
				cubo7.position.z=3;

				cubo8.position.x=9;
				cubo8.position.y=12;
				cubo8.position.z=3;




				cubo9.position.x=3;
				cubo9.position.y=-16;
				cubo9.position.z=3;

				cubo10.position.x=9;
				cubo10.position.y=-16;
				cubo10.position.z=3;

				cubo11.position.x=3;
				cubo11.position.y=-20;
				cubo11.position.z=3;

				cubo12.position.x=9;
				cubo12.position.y=-20;
				cubo12.position.z=3;


				cubo13.position.x=3;
				cubo13.position.y=-24;
				cubo13.position.z=3;

				cubo14.position.x=9;
				cubo14.position.y=-24;
				cubo14.position.z=3;





				cubo15.position.x=3;
				cubo15.position.y=-4;
				cubo15.position.z=3;

				cubo16.position.x=9;
				cubo16.position.y=-4;
				cubo16.position.z=3;

				cubo17.position.x=3;
				cubo17.position.y=-8;
				cubo17.position.z=3;

				cubo18.position.x=9;
				cubo18.position.y=-8;
				cubo18.position.z=3;

				cubo19.position.x=3;
				cubo19.position.y=-12;
				cubo19.position.z=3;

				cubo20.position.x=9;
				cubo20.position.y=-12;
				cubo20.position.z=3;

			

				

				//Agregar el cubo a la escena

				escena.add(cubo1);
				escena.add(cubo2);
				escena.add(cubo3);
				escena.add(cubo4);
				escena.add(cubo5);
				escena.add(cubo6);
				escena.add(cubo7);
				escena.add(cubo8);
				escena.add(cubo9);
				escena.add(cubo10);
				escena.add(cubo11);
				escena.add(cubo12);
				escena.add(cubo13);
				escena.add(cubo14);
				escena.add(cubo15);
				escena.add(cubo16);
				escena.add(cubo17);
				escena.add(cubo18);
				escena.add(cubo19);
				escena.add(cubo20);
				
								
				cubo1.castShadow = true;
				cubo2.castShadow = true;
				cubo3.castShadow = true;
				cubo4.castShadow = true;
				cubo5.castShadow = true;
				cubo6.castShadow = true;
				cubo7.castShadow = true;
				cubo8.castShadow = true;
				cubo9.castShadow = true;
				cubo10.castShadow = true;
				cubo11.castShadow = true;
				cubo12.castShadow = true;
				cubo13.castShadow = true;
				cubo14.castShadow = true;
				cubo15.castShadow = true;
				cubo16.castShadow = true;
				cubo17.castShadow = true;
				cubo18.castShadow = true;
				cubo19.castShadow = true;
				cubo20.castShadow = true;

				cubo3.rotation.y =90;
				cubo4.rotation.y=90;
				cubo5.rotation.y =180;
				cubo6.rotation.y=180;

				cubo9.rotation.y =90;
				cubo10.rotation.y=90;
				cubo11.rotation.y =180;
				cubo12.rotation.y=180;

				cubo15.rotation.y =90;
				cubo16.rotation.y=90;
				cubo17.rotation.y =180;
				cubo18.rotation.y=180;
				

				//Crear el plano que simula el suelo

				var geometriaDelPlano = new THREE.PlaneGeometry(60,60);
				var materialDelPlano = new THREE.MeshLambertMaterial({color: 0xcccccc});

				var plano = new THREE.Mesh(geometriaDelPlano,materialDelPlano);	 

			//Rotar y posicionar el plano

				plano.rotation.x=-0.5*Math.PI;

				plano.position.x=0		

				plano.position.y=-3

				plano.position.z=0

			//Agregar el plano a la escena

					//escena.add(plano);

				var luz = new THREE.SpotLight( 0xffffff );

				luz.position.set( -40, 40, 60 );

				escena.add( luz );
				plano.receiveShadow = true;
				luz.castShadow = true;

				//Inicializamos la variable paso para controlar el rebote de la esfera

 				var paso=0;   

 		//inicia codigo para la animacion de cubo y esfera

			// llamada a función de animación

			animar();
			function animar() {

			// rotar el cubo

			cubo1.rotation.x += 0.02;

			cubo1.rotation.y += 0.02;

			cubo1.rotation.z += 0.02;
				// rebotar la esfera

				
				var ang=1;

				animar();

				function animar(){
					ang +=0.01;
					var x=80 *Math.cos(ang);
					var z= 80 *Math.sin(ang);

					camara.position.x =x;
					camara.position.z = z;
					camara.lookAt(escena.position);
					// renderizar con requestAnimationFrame

				requestAnimationFrame(animar);

				renderizador.render(escena, camara);
				}
				

				}//termina el codogo de la animacion

			//Posicionamos la cámara y hacemos que apunte al centro de la escena.
			camara.position.x = 0;
			camara.position.y = 30;
			camara.position.z = 30;
			camara.lookAt(escena.position);

			//Asociamos el resultado del renderizado con el elemento html adecuado (un div o un canvas)
			$("#SalidaWebGL").append(renderizador.domElement);

			//Renderizamos la escena
			renderizador.render(escena, camara);

    });
	
	</script>
</body>
</html>